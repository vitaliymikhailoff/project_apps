# project_apps

## Развертка Kubernetes - Deckhouse
В качестве платформы контейнеризации я выбрал продукт Deckhouse, т.к. он разворачивается в автоматизированном виде, имеет интеграцию с Yandex Cloud, а также в комплект входят все необходимые инфраструктурные продукты.
Развертка производилась по мануалу https://deckhouse.ru/gs/yandex/step2.html
В результате в Yandex Cloud были развернуты две ноды - мастер и воркер, а также балансировщик для ingress.

## Развертка Gitlab - Terraform
В папке terraform лежат конфиги для автоматизированной развертки виртуальной машины в Yandex Cloud с поднятым GitLab.
В резальтате при помощи инструмента terraform развернута ВМ в Yandex Cloud с установленным GitLab

## Приложение
В папках crawler и ui лежит код приложений - форк исходных репозиториев.
Дополнительно в этих папках лежат Dockerfileы для сборки образов с приложениями.
Также есть папка rabbitmq, в ней лежат заготовленные конфиги для rabbit и Dockerfile для сборки кастомного образа.

## Helm
В папке helm лежат конфиги helm для деплоя приложений в Kubernetes.
Деплой происходит при помощи механизма зависимостей, которые описаны в файле ./helm/app/requirements.yaml

## GitLab CI
В корне репозитория лежит файл .gitlab-ci.yml, в котором описан пайплайн выкладки приложения в kubernetes.
Созданы три шага деплоя - build, test, deploy.
Build - сборка образов приложений и отправка их в dockerhub.
Test - поднимается полностью проект, включая mongo и rabbit, используется файл в корне - docker-compose.yml, производятся тесты приложений и окружение удаляется.
Deploy - производится настройка rannerа в виде установки helm и копирования kubeconfig, после чего выполняется деплой приложения в Kubernetes.

## Мониторинг и Логирование
Платформа Deckhouse предоставляет инструменты из коробки для работы с мониторингом и логированием.
Логирование - Grafana Loki.
Мониторинг - Grafana Prometheus.
Дополнительно настроен алертинг в телеграмм.
Конфигурационные файлы лежат в папке deckhouse,

Все скриншоты лежат в папке screens.

